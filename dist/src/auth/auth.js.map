{"version":3,"sources":["../../../src/auth/auth.js"],"names":["data","authenticated","Login","context","info","$http","post","then","body","ret_code","localStorage","setItem","ret_data","token","$router","push","path","$Message","error","ret_msg","catch","response","console","log","getAuthHeader","getItem","checkAuth"],"mappings":";;;;;kBAAc;AACZA,QAAM;AACJC,mBAAe;AADX,GADM;AAIZC,OAJY,iBAILC,OAJK,EAIIC,IAJJ,EAIU;AACpBD,YAAQE,KAAR,CAAcC,IAAd,CAAmB,gBAAnB,EAAqCF,IAArC,EAA2CG,IAA3C,CAAgD,UAAUP,IAAV,EAAgB;AAC9D,UAAIA,KAAKQ,IAAL,CAAUC,QAAV,KAAuB,CAA3B,EAA8B;AAC5BC,qBAAaC,OAAb,CAAqB,OAArB,EAA8BX,KAAKQ,IAAL,CAAUI,QAAV,CAAmBC,KAAjD;AACA,aAAKZ,aAAL,GAAqB,IAArB;AACA,aAAKa,OAAL,CAAaC,IAAb,CAAkB,EAACC,MAAM,WAAP,EAAlB;AACD,OAJD,MAIO;AACL,aAAKC,QAAL,CAAcC,KAAd,CAAoBlB,KAAKQ,IAAL,CAAUW,OAA9B;AACD;AACF,KARD,EAQGC,KARH,CAQS,UAAUC,QAAV,EAAoB;AAC3BC,cAAQC,GAAR,CAAYF,QAAZ;AACD,KAVD;AAWD,GAhBW;AAiBZG,eAjBY,2BAiBK;AACf,WAAO;AACL,uBAAiBd,aAAae,OAAb,CAAqB,OAArB;AADZ,KAAP;AAGD,GArBW;AAsBZC,WAtBY,uBAsBC;AACX,QAAIb,QAAQH,aAAae,OAAb,CAAqB,OAArB,CAAZ;AACA,QAAIZ,KAAJ,EAAW;AACT,WAAKZ,aAAL,GAAqB,IAArB;AACD,KAFD,MAEO;AACL,WAAKA,aAAL,GAAqB,KAArB;AACD;AACF;AA7BW,C","file":"auth.js","sourcesContent":["export default{\r\n  data: {\r\n    authenticated: false\r\n  },\r\n  Login (context, info) {\r\n    context.$http.post('api/anon/login', info).then(function (data) {\r\n      if (data.body.ret_code === 1) {\r\n        localStorage.setItem('token', data.body.ret_data.token)\r\n        this.authenticated = true\r\n        this.$router.push({path: '/homepage'})\r\n      } else {\r\n        this.$Message.error(data.body.ret_msg)\r\n      }\r\n    }).catch(function (response) {\r\n      console.log(response)\r\n    })\r\n  },\r\n  getAuthHeader () {\r\n    return {\r\n      'Authorization': localStorage.getItem('token')\r\n    }\r\n  },\r\n  checkAuth () {\r\n    var token = localStorage.getItem('token')\r\n    if (token) {\r\n      this.authenticated = true\r\n    } else {\r\n      this.authenticated = false\r\n    }\r\n  }\r\n}\r\n"]}